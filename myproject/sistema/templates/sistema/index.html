{% extends 'sistema/base_site.html' %}
{% load static %}

{% block body %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
<script src="http://code.jquery.com/jquery-latest.js"></script>  
<script>
    function myFunction(usr){
        console.log('wenas linarda');
        $.ajax({
            url: '/sistema/estadoList',
            data: {
                'usr': usr,
            },
            dataType: 'json',
            success: function(data) {
                console.log(data);
                $('#cant-'+usr).html(data[0]['rn']);
                if(data[0]['estado']=='Muy Bueno' || data[0]['estado']=='Bueno' || data[0]['estado']=='Medio'){
                    $('#estado-'+usr).attr("class","badge badge-complete");
                    html = 'Activo';
                    $('#estado-'+usr).append(html);
                } else {
                    if(data[0]['estado']=='Suspendido'){
                        $('#estado-'+usr).attr("class","badge badge-danger");
                        $('#detalles-'+usr).attr("href",data[0]['link']); //no se si va a andar xD
                        html ='Suspendido';
                        $('#estado-'+usr).append(html);
                    }else{
                        $('#estado-'+usr).attr("class","badge badge-pending");
                        $('#detalles-'+usr).attr("href",data[0]['link']); //no se si va a andar xD
                        html ='Pendiente';
                        $('#estado-'+usr).append(html);
                    }
                }
            }
        })
        /*if(usr.)
            <td><span id="cant" class="count"></span></td>
                                                    <td>
                                                        <span id="estado" ></span>
                                                    </td>
                                                    <td>ojito</td>*/
    };
</script>
        <!-- Content -->
        <div class="content">
            <center>
            {% if sexo == "Femenino" %}
                <h2><strong>Bienvenida {{usuario}}</strong> que tengas un lindo dia!</h2>
            {% else %}
                <h2><strong>Bienvenido {{usuario}}</strong> que tengas un lindo dia!</h2>

            {% endif %}
            <br>
            </center>

            <!-- Animated -->
            <div class="animated fadeIn">
                
                <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
                    <div class="carousel-inner" align="center">
                        <div class="carousel-item active">
                        <img class="d-block w-70" src="{% static 'images/todo.png'%}" alt="Logo"></a>
                        </div>
                        <div class="carousel-item">
                        <img class="d-block w-70" src="{% static 'images/prueba.png'%}" alt="Logo"></a>
                        </div>
                        <div class="carousel-item">
                        <img class="d-block w-70" src="{% static 'images/xd.png'%}" alt="Logo"></a>
                        </div>
                    </div>
                    <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>

                <!--  /Traffic -->
                <div class="content">
                    <div class="animated fadeIn">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="card">
                                    <div class="card-header">
                                        <strong class="card-title">Listado de Usuarios</strong>
                                    </div>
                                    <div class="card-body">
                                        <div class="table-stats order-table ov-h">
                                            <table id="tablita" class="table table-striped table-bordered">
                                                <thead>
                                                    <tr>
                                                        <th>Nombre</th>
                                                        <th>Rol</th>
                                                        <th >Cantidad de Reuniones</th>
                                                        <th>Estado</th>
                                                        <th> Detalles </th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    {% for usr in usuarios %}
                                                    <tr>
                                                        <td> <span class="name">{{usr.miembro.nombre}}</span> </td>
                                                        <td> <span class="product">{{usr.rol}}</span> </td>
                                                        <td id="cant-{{usr.id}}" class="text-center"></td>
                                                        <td id="estado-{{usr.id}}"></td>
                                                        <td class="text-center"><a href="#" id="detalles-{{usr.id}}" class="btn btn-outline-primary btn-sm" ><i class="fa fa-eye"></i></a></td>
                                                        <script>myFunction({{usr.id}})</script>
                                                    </tr>
                                                    {% endfor %}
                                                    {% comment %} class="badge badge-complete" {% endcomment %}
                                                    
                                                </tbody>
                                            </table>
                                        </div> <!-- /.table-stats -->
                                    </div>
                                </div>
                            </div> <!-- /.card -->
                        </div>  <!-- /.col-lg-8 -->
                    </div>
                </div>
                <!-- /.orders -->
                
                                    
                <!-- Calender Chart Weather  -->
                <div class="row">
                    <div class="col-md-12 col-lg-4">
                        <div class="card">
                            <div class="card-body">
                                <!-- <h4 class="box-title">Chandler</h4> -->
                                <div class="calender-cont widget-calender">
                                    <div id="calendar"></div>
                                </div>
                            </div>
                        </div><!-- /.card -->
                    </div>
                    
                </div>
                <!-- /Calender Chart Weather -->
                <!-- Modal - Calendar - Add New Event -->
                <div class="modal fade none-border" id="event-modal">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                <h4 class="modal-title"><strong>Add New Event</strong></h4>
                            </div>
                            <div class="modal-body"></div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default waves-effect" data-dismiss="modal">Close</button>
                                <button type="button" class="btn btn-success save-event waves-effect waves-light">Create event</button>
                                <button type="button" class="btn btn-danger delete-event waves-effect waves-light" data-dismiss="modal">Delete</button>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- /#event-modal -->
                <!-- Modal - Calendar - Add Category -->
                <div class="modal fade none-border" id="add-category">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                <h4 class="modal-title"><strong>Add a category </strong></h4>
                            </div>
                            <div class="modal-body">
                                <form>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <label class="control-label">Category Name</label>
                                            <input class="form-control form-white" placeholder="Enter name" type="text" name="category-name"/>
                                        </div>
                                        <div class="col-md-6">
                                            <label class="control-label">Choose Category Color</label>
                                            <select class="form-control form-white" data-placeholder="Choose a color..." name="category-color">
                                                <option value="success">Success</option>
                                                <option value="danger">Danger</option>
                                                <option value="info">Info</option>
                                                <option value="pink">Pink</option>
                                                <option value="primary">Primary</option>
                                                <option value="warning">Warning</option>
                                            </select>
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default waves-effect" data-dismiss="modal">Close</button>
                                <button type="button" class="btn btn-danger waves-effect waves-light save-category" data-dismiss="modal">Save</button>
                            </div>
                        </div>
                    </div>
                </div>
            <!-- /#add-category -->
            </div>
            <!-- .animated -->
        </div>
        <input type="hidden" id="titulo" value= "{{configuracion_form.titulo}}" class="titulo_reporte">
        <input type="hidden" id="telefono" value = "{{configuracion_form.telefono}}" class="telefono_reporte">
        <input type="hidden" id="direccion" value = "{{configuracion_form.direccion}}" class="direccion_reporte">
<script src="{% static 'assets/js/lib/data-table/datatables.min.js'%}"></script>
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/jszip-2.5.0/dt-1.10.20/af-2.3.4/b-1.6.0/b-colvis-1.6.0/b-html5-1.6.0/b-print-1.6.0/cr-1.5.2/fc-3.3.0/fh-3.1.6/kt-2.5.1/r-2.2.3/rg-1.1.1/rr-1.2.6/sl-1.3.1/datatables.min.css"/>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/pdfmake.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/vfs_fonts.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/v/dt/jszip-2.5.0/dt-1.10.20/af-2.3.4/b-1.6.0/b-colvis-1.6.0/b-html5-1.6.0/b-print-1.6.0/cr-1.5.2/fc-3.3.0/fh-3.1.6/kt-2.5.1/r-2.2.3/rg-1.1.1/rr-1.2.6/sl-1.3.1/datatables.min.js"></script>
    
{% endblock body %}